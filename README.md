# Tag2Table â€” AI æ¨™ç±¤çµ±è¨ˆèˆ‡ç¿»è­¯å·¥å…·

> **Tag2Table** æ˜¯ä¸€å€‹è‡ªå‹•åŒ–å·¥å…·ï¼Œç”¨æ–¼æƒæè¨“ç·´è³‡æ–™å¤¾ä¸­çš„æ‰€æœ‰ `.txt` æ¨™ç±¤æª”ï¼Œçµ±è¨ˆæ¨™ç±¤å‡ºç¾æ¬¡æ•¸ï¼Œä¸¦ä½¿ç”¨ AI è‡ªå‹•ç¿»è­¯æˆç¹é«”ä¸­æ–‡ï¼Œæœ€å¾Œç”¢å‡ºé©åˆ Notepad++ æŸ¥çœ‹çš„è¡¨æ ¼æ ¼å¼ã€‚

æ”¯æ´ **é›²ç«¯ Gemini** èˆ‡ **æœ¬åœ° Ollama** é›™æ¨¡å¼ï¼Œå¯ä¾éœ€æ±‚é¸æ“‡ã€‚

## ğŸ“‚ å°ˆæ¡ˆçµæ§‹

```
â”œâ”€â”€ src/                      # ç¨‹å¼ç¢¼
â”‚   â”œâ”€â”€ main.py               # ä¸»ç¨‹å¼ï¼ˆå•Ÿå‹•è¦–çª—ã€æ•´åˆå„æ¨¡çµ„ï¼‰
â”‚   â”œâ”€â”€ database_manager.py   # è³‡æ–™åº«æ¨¡çµ„ï¼ˆJSON è®€å–ã€å¯«å…¥ã€åˆä½µï¼‰
â”‚   â”œâ”€â”€ ollama_client.py      # ç¶²è·¯æ¨¡çµ„ï¼ˆé€£ç·š Ollama / Mac / Gemini ç¿»è­¯æ¨™ç±¤ï¼‰
â”‚   â”œâ”€â”€ processor.py          # è™•ç†æ¨¡çµ„ï¼ˆæƒæã€ç¿»è­¯ã€åˆ†é¡ã€ç”¢å‡ºæµç¨‹ï¼‰
â”‚   â””â”€â”€ ui_components.py      # ä»‹é¢æ¨¡çµ„ï¼ˆæŒ‰éˆ•ã€åˆ†é ã€ç¾¤çµ„ã€è¦–çª—ï¼‰
â”œâ”€â”€ Tag-to-Table.py           # ç›¸å®¹å…¥å£ï¼ˆç­‰åŒ python -m src.mainï¼‰
â”œâ”€â”€ data/                     # JSON é›†ä¸­æ–¼æ­¤
â”‚   â”œâ”€â”€ *.example.json        # ç¯„ä¾‹æª”ï¼ˆå¯æäº¤ï¼‰ï¼Œclone å¾Œé¦–æ¬¡åŸ·è¡Œæœƒè‡ªå‹•è¤‡è£½å»ºç«‹å¯¦æª”
â”‚   â”œâ”€â”€ config.json           # å¯¦æª”ï¼ˆgitignoreï¼Œå«ç§äººè¨­å®šï¼‰
â”‚   â”œâ”€â”€ tag_map.json
â”‚   â”œâ”€â”€ categories.json
â”‚   â”œâ”€â”€ crop_parts.json
â”‚   â””â”€â”€ ...
â””â”€â”€ txt/                      # è¼¸å‡ºæ–‡å­—æª”é è¨­å­˜æ”¾
    â”œâ”€â”€ AI_Tag_Reference.txt
    â”œâ”€â”€ Current_Folder_Tag_Report.txt
    â””â”€â”€ File_Based_Tag_Report.txt
```

| æª”æ¡ˆ | èªªæ˜ |
|------|------|
| `src/main.py` | ä¸»ç¨‹å¼å…¥å£ |
| `åŸ·è¡Œæ¨™ç±¤ç¿»è­¯.bat` | ä¸€éµå•Ÿå‹•ï¼ˆæœƒè‡ªå‹•æª¢æŸ¥ä¸¦å®‰è£å¥—ä»¶ï¼‰ |
| `å®‰è£ä¾è³´.bat` | ä¸€éµå®‰è£æ‰€æœ‰ä¾è³´å¥—ä»¶ |
| `è¨­å®šGitèº«åˆ†.bat` | è¨­å®š Git user.nameã€user.emailï¼ˆé¦–æ¬¡å¿…åšï¼‰ |
| `æ‰‹å‹•æ¨é€è‡³GitHub.bat` | ä¸€éµåŸ·è¡Œå®Œæ•´ Git æŒ‡ä»¤ï¼ˆé¦–æ¬¡æ¨é€ï¼‰ |
| `ä¸Šå‚³è‡³Git.bat` | äº’å‹•å¼åŠ å…¥ã€æäº¤ã€æ¨é€ï¼ˆå¾ŒçºŒæ›´æ–°ï¼‰ |
| `requirements.txt` | Python å¥—ä»¶æ¸…å–® |
| `data/config.json` | æœ¬åœ°è¨­å®šï¼ˆAPI Keyã€è·¯å¾‘ç­‰ï¼Œ**gitignore**ï¼Œè‡ªå‹•ç”¢ç”Ÿï¼‰ |
| `data/tags_db.json` | æ¨™ç±¤å¿«ç…§ï¼ˆ**gitignore**ï¼‰ |
| `data/all_characters_tags.json` | ç´¯ç©è³‡æ–™åº«ï¼ˆ**gitignore**ï¼‰ |
| `data/categories.json` | åˆ†é¡é—œéµå­—å®šç¾©ï¼ˆ**gitignore**ï¼‰ |
| `data/tag_map.json` | åŸºç¤ç¿»è­¯å°ç…§ï¼ˆ**gitignore**ï¼‰ |
| `data/prompt_presets.json` | è§’è‰²å¿«é€Ÿå¥—è£ï¼ˆ**gitignore**ï¼‰ |
| `data/crop_parts.json` | è£åˆ‡éƒ¨ä½è¨­å®šï¼ˆ**gitignore**ï¼‰ |
| `data/*.example.json` | **ç¯„ä¾‹æª”**ï¼ˆå¯æäº¤ï¼‰ï¼Œé¦–æ¬¡åŸ·è¡Œæ™‚æœƒè‡ªå‹•è¤‡è£½å»ºç«‹å°æ‡‰ JSON |

## ğŸ“‹ åŠŸèƒ½ç‰¹è‰²

- âœ… **é›™ç¿»è­¯å¼•æ“**ï¼šé›²ç«¯ Geminiï¼ˆç²¾åº¦é«˜ã€ä¸ä½”é¡¯å­˜ï¼‰æˆ–æœ¬åœ° Ollamaï¼ˆå®Œå…¨éš±ç§ï¼‰
- âœ… **åœ–å½¢åŒ–ä»‹é¢**ï¼šå‹å–„ GUIï¼Œç„¡éœ€ä¿®æ”¹ç¨‹å¼ç¢¼
- âœ… **éè¿´æƒæ**ï¼šè‡ªå‹•æƒææŒ‡å®šè³‡æ–™å¤¾åŠæ‰€æœ‰å­è³‡æ–™å¤¾ä¸­çš„ `.txt` æ¨™ç±¤æª”
- âœ… **æ¨™ç±¤çµ±è¨ˆ**ï¼šè¨ˆç®—æ¯å€‹æ¨™ç±¤å‡ºç¾æ¬¡æ•¸ï¼ŒæŒ‰é »ç‡æ’åº
- âœ… **åˆ†é¡è¼¸å‡º**ï¼šå¯é¸ä¾èº«é«”ã€è¡£æœã€å§¿æ…‹ç­‰åˆ†é¡åˆ†çµ„è¼¸å‡º
- âœ… **æœ¬åœ°å­—å…¸**ï¼šæ”¯æ´é å…ˆå®šç¾©çš„æ¨™ç±¤ç¿»è­¯ï¼Œå¯è‡ªè¡Œæ“´å……
- âœ… **æ¨¡å‹ç®¡ç†**ï¼šOllama æ¨¡å¼å¯è¼‰å…¥å·²å®‰è£æ¨¡å‹åˆ—è¡¨ã€é‡‹æ”¾é¡¯å­˜
- âœ… **å­˜æª”é¸æ“‡**ï¼šå¯è‡ªè¨‚å­˜æª”è·¯å¾‘èˆ‡æª”å
- âœ… **å³æ™‚æ—¥èªŒ**ï¼šGUI é¡¯ç¤ºè™•ç†é€²åº¦èˆ‡è©³ç´°æ—¥èªŒ
- âœ… **æ‹’çµ•éæ¿¾**ï¼šè‡ªå‹•éæ¿¾æ¨¡å‹æ‹’çµ•çš„å…§å®¹ï¼Œæ¨™è¨˜ç‚ºã€Œï¼ˆæœªç¿»è­¯ï¼‰ã€
- âœ… **è¨­å®šå„²å­˜**ï¼šAPI Key å¯å„²å­˜è‡³ `data/config.json`ï¼Œä¸‹æ¬¡é–‹å•Ÿè‡ªå‹•è¼‰å…¥ï¼Œè¼¸å…¥æ™‚ä»¥ â— é®ç½©é¡¯ç¤º
- âœ… **æ™ºæ…§æ›´æ–°å…¶ä»–é¡**ï¼šå·²ç¿»è­¯ä½†åˆ†é¡ç‚ºã€Œå…¶ä»–ã€çš„æ¨™ç±¤æœƒè‡ªå‹•é‡é€ AI ç²¾æº–åˆ†é¡ï¼Œä¸é‡è¤‡ç¿»è­¯å·²å®Œæˆé …ç›®
- âœ… **ç¿»è­¯ï¼‹åˆ†é¡åˆä½µ**ï¼šå–®æ¬¡ API å‘¼å«åŒæ™‚å–å¾—ç¿»è­¯èˆ‡åˆ†é¡ï¼Œç¯€çœç”¨é‡

## ğŸš€ ä¸Šå‚³è‡³ Gitï¼ˆGitHub / GitLabï¼‰

æœ¬å°ˆæ¡ˆå·²é©åˆæ”¾å…¥ Git ç‰ˆæœ¬æ§åˆ¶ï¼Œ`.gitignore` å·²æ’é™¤æ•æ„Ÿèˆ‡å€‹äººè³‡æ–™ã€‚

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨æ‰¹æ¬¡æª”ï¼ˆæ¨è–¦ï¼ŒWindowsï¼‰**

1. **é¦–æ¬¡ä½¿ç”¨**ï¼šå…ˆåŸ·è¡Œ `è¨­å®šGitèº«åˆ†.bat`ï¼Œè¼¸å…¥ GitHub ä¿¡ç®±ä¸¦è¨­å®šåç¨±
2. `æ‰‹å‹•æ¨é€è‡³GitHub.bat` â€” ä¸€éµåŸ·è¡Œå®Œæ•´ Git æŒ‡ä»¤ï¼ˆé¦–æ¬¡æ¨é€ç”¨ï¼‰
3. `ä¸Šå‚³è‡³Git.bat` â€” äº’å‹•å¼åŠ å…¥ã€æäº¤ã€æ¨é€ï¼ˆå¾ŒçºŒæ›´æ–°ç”¨ï¼‰

**æ–¹æ³•äºŒï¼šæ‰‹å‹•æŒ‡ä»¤ï¼ˆèˆ‡ GitHub å»ºç«‹ repo å¾Œé¡¯ç¤ºçš„ç›¸åŒï¼‰**

```bash
git init
git add .
git commit -m "initial version of Tag2Table"
git branch -M main
git remote add origin https://github.com/kensato8912/Tag2Table.git
git push -u origin main
```

**å·²æ’é™¤çš„æª”æ¡ˆ**ï¼ˆä¸æœƒä¸Šå‚³ï¼‰ï¼š
- `data/config.json`ï¼šAPI Key
- `data/tags_db.json`ã€`data/all_characters_tags.json`ï¼šå€‹äººæ¨™ç±¤è³‡æ–™åº«
- `txt/`ï¼šè¼¸å‡ºæ–‡å­—æª”
- `__pycache__/`ã€`venv/` ç­‰

**æœƒä¸€ä½µæäº¤çš„ç¯„ä¾‹**ï¼š`data/categories.json`ã€`data/tag_map.json` è‹¥å­˜åœ¨ï¼Œæœƒä½œç‚ºé è¨­ç¯„ä¾‹ä¾›ä»–äººä½¿ç”¨ã€‚

---

## ğŸ”§ éœ€æ±‚ç’°å¢ƒ

- Python 3.7 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Ollama æ¨¡å¼**ï¼š[Ollama](https://ollama.ai/) å·²å®‰è£ä¸¦é‹è¡Œ
- **Gemini æ¨¡å¼**ï¼šGoogle API Keyï¼Œéœ€å®‰è£ `google-genai`ï¼ˆæ–°ç‰ˆ SDKï¼Œå–ä»£å·²å»¢æ£„çš„ `google-generativeai`ï¼‰

## ğŸ“¦ å®‰è£æ­¥é©Ÿ

### 1. å®‰è£å¿…è¦å¥—ä»¶

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨æ‰¹æ¬¡æª”ï¼ˆæ¨è–¦ï¼ŒWindowsï¼‰**

é›™æ“ŠåŸ·è¡Œ `å®‰è£ä¾è³´.bat`ï¼Œæœƒè‡ªå‹•å®‰è£ `openai` èˆ‡ `google-genai`ã€‚

**æ–¹æ³•äºŒï¼šä½¿ç”¨ pip**

```bash
pip install -r requirements.txt
```

æˆ–åˆ†åˆ¥å®‰è£ï¼š

```bash
pip install openai
pip install google-genai
```

> **èªªæ˜**ï¼š`google-generativeai` å·²è¢« Google å®£å‘Šå»¢æ£„ï¼ˆDeprecatedï¼‰ï¼Œç¾æ”¹ç”¨æ–°ç‰ˆ `google-genai` SDKã€‚è‹¥ä½ çš„ Python 3.10 å‡ºç¾å¤§é‡è­¦å‘Šï¼Œå‡ç´šåˆ° `google-genai` å¯è§£æ±ºã€‚

**æ–¹æ³•ä¸‰ï¼špip ç„¡åæ‡‰æ™‚**

è‹¥ `pip install` ç„¡åæ‡‰ï¼Œæ”¹ç”¨ `python -m pip`ï¼š

```bash
python -m pip install --upgrade pip
python -m pip install -r requirements.txt
```

è‹¥ç¶²è·¯ä¸ç©©ï¼Œå¯ä½¿ç”¨æ¸…è¯é¡åƒï¼š

```bash
python -m pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt
```

> **æ³¨æ„**ï¼š`tkinter` ç‚º Python å…§å»ºæ¨¡çµ„ï¼Œé€šå¸¸ä¸éœ€é¡å¤–å®‰è£ã€‚è‹¥é‡éŒ¯èª¤è«‹åƒè€ƒä¸‹æ–¹ã€Œå¸¸è¦‹å•é¡Œã€ã€‚

### 2. Ollama æ¨¡å¼è¨­å®šï¼ˆé¸æ“‡æœ¬åœ°ç¿»è­¯æ™‚ï¼‰

1. å®‰è£ Ollamaï¼šå‰å¾€ [Ollama å®˜ç¶²](https://ollama.ai/) ä¸‹è¼‰ä¸¦å®‰è£
2. å•Ÿå‹•æœå‹™ï¼š`ollama serve`
3. ä¸‹è¼‰æ¨¡å‹ï¼š`ollama pull qwen2.5` æˆ– `ollama pull gemma2:2b` ç­‰

### 3. Gemini æ¨¡å¼è¨­å®šï¼ˆé¸æ“‡é›²ç«¯ç¿»è­¯æ™‚ï¼‰

1. å‰å¾€ [Google AI Studio](https://makersuite.google.com/app/apikey)
2. å»ºç«‹ä¸¦è¤‡è£½ API Key

## âš™ï¸ ä½¿ç”¨èªªæ˜

### å•Ÿå‹•æ–¹å¼

**æ–¹æ³•ä¸€ï¼šé›™æ“Šæ‰¹æ¬¡æª”**

```
åŸ·è¡Œæ¨™ç±¤ç¿»è­¯.bat
```

**æ–¹æ³•äºŒï¼šå‘½ä»¤åˆ—**

```bash
python Tag-to-Table.py
```

### GUI ä»‹é¢è¨­å®š

1. **è¨“ç·´è³‡æ–™å¤¾**ï¼šé»æ“Šã€Œç€è¦½...ã€é¸æ“‡åŒ…å« `.txt` æ¨™ç±¤æª”çš„è³‡æ–™å¤¾
2. **ç¿»è­¯å¼•æ“**ï¼š
   - **é›²ç«¯ Gemini**ï¼šç²¾åº¦é«˜ã€ä¸ä½”é¡¯å­˜ï¼Œéœ€è¼¸å…¥ API Key
   - **æœ¬åœ° Ollama**ï¼šå®Œå…¨éš±ç§ï¼Œéœ€å•Ÿå‹• Ollama ä¸¦é¸æ“‡æ¨¡å‹
3. **Ollama è¨­å®š**ï¼ˆåƒ… Ollama æ¨¡å¼ï¼‰ï¼š
   - æœå‹™åœ°å€ï¼šé è¨­æœ¬æ©Ÿ `http://localhost:11434/v1`ï¼Œå¯é»ã€Œæœ¬æ©Ÿã€/ã€Œé ç«¯ã€å¿«é€Ÿåˆ‡æ›
   - **é ç«¯é€£ç·š**ï¼šå¡«å…¥ Mac/å¦ä¸€å°é›»è…¦çš„å€åŸŸç¶²è·¯ IPï¼ˆä¾‹: 192.168.1.188ï¼‰ï¼Œé»ã€Œé ç«¯ã€ï¼Œç¢ºä¿å…©å°é›»è…¦é€£åœ¨åŒä¸€ Wi-Fi
   - æ¨¡å‹ï¼šé»æ“Šã€Œè¼‰å…¥æ¨¡å‹ã€å–å¾—å·²å®‰è£æ¨¡å‹åˆ—è¡¨ï¼Œæˆ–æ‰‹å‹•è¼¸å…¥
   - ã€Œé‡‹æ”¾æ¨¡å‹ã€ï¼šè™•ç†å®Œæˆå¾Œå¯é‡‹æ”¾é¡¯å­˜
4. **å­˜æª”è·¯å¾‘**ï¼šå¯æ‰‹å‹•è¼¸å…¥æˆ–é»æ“Šã€Œå¦å­˜ç‚º...ã€é¸æ“‡ä½ç½®
5. **å•Ÿç”¨åˆ†é¡**ï¼šå‹¾é¸å¾Œä¾èº«é«”ç‰¹å¾µã€è¡£æœé…ä»¶ã€å§¿æ…‹å‹•ä½œç­‰åˆ†çµ„è¼¸å‡º

## ğŸ“Š è¼¸å‡ºæ ¼å¼

### ä¸€èˆ¬æ¨¡å¼

```
long hair                        | 150   | é•·é«®
blue eyes                        | 120   | è—è‰²çœ¼ç›
1girl                            | 95    | 1åå¥³å­©
```

### åˆ†é¡æ¨¡å¼

```
â— èº«é«”ç‰¹å¾µ (Body)
------------------------------------------------------------
long hair                        | 150   | é•·é«®
blue eyes                        | 120   | è—è‰²çœ¼ç›

â— è¡£æœé…ä»¶ (Clothing)
------------------------------------------------------------
...
```

## ğŸ“ æ¨™ç±¤æª”æ ¼å¼

æ”¯æ´é€—è™Ÿåˆ†éš”çš„æ¨™ç±¤æ ¼å¼ï¼š

```
1girl, solo, niyaniya, long hair, blue eyes
```

## ğŸ”§ æ“´å……è‡ªè¨‚ç¿»è­¯

ç·¨è¼¯ `data/tag_map.json` é å…ˆå®šç¾©æ¨™ç±¤ç¿»è­¯ï¼ˆé¿å…é‡è¤‡å‘¼å« APIï¼‰ï¼Œè‹¥æª”æ¡ˆä¸å­˜åœ¨ç¨‹å¼æœƒè‡ªå‹•å»ºç«‹é è¨­æª”ï¼š

```json
{
  "niyaniya": "å°¼äºå°¼äº",
  "ibuki": "ä¼Šå¹",
  "blue archive": "è”šè—æª”æ¡ˆ",
  "1girl": "1åå¥³å­©"
}
```

## ğŸ“‘ åˆ†é¡é …ç›®

å•Ÿç”¨åˆ†é¡æ™‚ï¼Œæ¨™ç±¤æœƒä¾ä¸‹åˆ—é¡åˆ¥åˆ†çµ„ã€‚åˆ†é¡é—œéµå­—å„²å­˜æ–¼ `data/categories.json`ï¼Œå¯è‡ªè¡Œç·¨è¼¯å¾Œé‡å•Ÿç¨‹å¼å³å¯ç”Ÿæ•ˆï¼š

- èº«é«”ç‰¹å¾µ (Body)ã€è¡£æœé…ä»¶ (Clothing)ã€å§¿æ…‹å‹•ä½œ (Pose)ã€èƒŒæ™¯ç’°å¢ƒ (Background)ã€å…‰ç·šé¢¨æ ¼ (Style)ã€è§’è‰²èˆ‡ä½œå“ (Character)ã€å…¶ä»– (General)

è‹¥ `data/categories.json` ä¸å­˜åœ¨ï¼Œç¨‹å¼æœƒè‡ªå‹•å»ºç«‹é è¨­æª”ã€‚åˆ†é¡ä¾†æºï¼šAI ç¿»è­¯æ™‚æœƒåŒæ™‚åˆ¤æ–·åˆ†é¡ï¼Œè‹¥ç‚ºã€Œå…¶ä»–ã€æœƒåœ¨ä¸‹æ¬¡åŸ·è¡Œæ™‚é‡é€ç²¾æº–åˆ†é¡ã€‚

## ğŸ“ è¼¸å‡ºæª”æ¡ˆä½ç½®

é è¨­å­˜æ–¼å°ˆæ¡ˆä¸‹çš„ **`txt` è³‡æ–™å¤¾**ã€‚ä¾‹å¦‚ `txt/AI_Tag_Reference.txt`ã€`txt/Current_Folder_Tag_Report.txt`ã€`txt/File_Based_Tag_Report.txt`ã€‚å¯é€éã€Œå¦å­˜ç‚º...ã€æŒ‡å®šè·¯å¾‘ã€‚

### ç´¯ç©è³‡æ–™åº« JSON çµæ§‹ï¼ˆ`data/all_characters_tags.json`ï¼‰

æ¡ç”¨ã€Œè®€å– â†’ æ¯”å° â†’ åˆä½µ â†’ å„²å­˜ã€é‚è¼¯ï¼Œä»¥ `en_tag` ç‚ºç´¢å¼•ï¼Œæ›äººç‰©æ™‚ä¸æœƒäº’ç›¸è¦†è“‹ï¼š

```json
{
    "en_tag": "halo",
    "zh_tag": "å…‰ç’°",
    "count": 150,
    "characters": ["Professor_Niyaniya", "Ibuki", "Key"],
    "category": "è§’è‰²èˆ‡ä½œå“ (Character)"
}
```

- **characters**ï¼šè¨˜éŒ„å“ªäº›è§’è‰²ï¼è¨“ç·´è³‡æ–™å¤¾ä½¿ç”¨éæ­¤æ¨™ç±¤ï¼Œç”±è·¯å¾‘çˆ¶è³‡æ–™å¤¾åç¨±è‡ªå‹•å¡«å…¥ï¼ˆå¦‚ `train_images` çš„çˆ¶è³‡æ–™å¤¾ `Professor_Niyaniya`ï¼‰
- **category**ï¼šåˆ†é¡ç”± AI æˆ–é—œéµå­—æ¨æ–·ï¼Œå„ªå…ˆä½¿ç”¨ AI çµæœ

### æ™ºæ…§æ›´æ–°é‚è¼¯

- **éœ€è¦ AI è™•ç†**ï¼šå¾æœªè¦‹éçš„æ¨™ç±¤ï¼Œæˆ–å·²å­˜åœ¨ä½†åˆ†é¡ç‚ºã€Œå…¶ä»–ã€çš„æ¨™ç±¤
- **è·³éè™•ç†**ï¼šå·²æœ‰ç¿»è­¯ä¸”åˆ†é¡æ˜ç¢ºçš„æ¨™ç±¤ï¼Œç›´æ¥æ²¿ç”¨è³‡æ–™åº«
- **åˆ†é¡å„ªå…ˆé †åº**ï¼šAI å›å‚³ > è³‡æ–™åº«æ—¢æœ‰ > é—œéµå­—æ¨æ–·ï¼ˆ`get_category`ï¼‰

## âš ï¸ æ³¨æ„äº‹é …

1. **Gemini æ¨¡å¼**ï¼šéœ€ç¶²è·¯é€£ç·šï¼Œæœ‰ API ä½¿ç”¨é™åˆ¶
2. **Ollama æ¨¡å¼**ï¼šéœ€ç¢ºä¿ Ollama æœå‹™é‹è¡Œï¼Œä¸¦æœ‰è¶³å¤ è¨˜æ†¶é«”èˆ‡é¡¯å­˜
3. **æª”æ¡ˆç·¨ç¢¼**ï¼šæ¨™ç±¤æª”å»ºè­°ä½¿ç”¨ UTF-8
4. **æ‹’çµ•éæ¿¾**ï¼šéƒ¨åˆ†æ•æ„Ÿæ¨™ç±¤å¯èƒ½è¢«æ¨¡å‹æ‹’çµ•ï¼Œæœƒé¡¯ç¤ºç‚ºã€Œï¼ˆæœªç¿»è­¯ï¼‰ã€å¯åœ¨ `data/tag_map.json` ä¸­æ‰‹å‹•è£œå……

## â“ å¸¸è¦‹å•é¡Œ

### Q: å‡ºç¾ `ModuleNotFoundError: No module named 'openai'`

```bash
pip install openai
```

### Q: Gemini æ¨¡å¼å‡ºç¾ `No module named 'google.genai'` æˆ– import éŒ¯èª¤

åŸ·è¡Œ `å®‰è£ä¾è³´.bat` æˆ–ï¼š

```bash
python -m pip install google-genai
```

> èˆŠç‰ˆ `google-generativeai` å·²å»¢æ£„ï¼Œè«‹ä½¿ç”¨ `google-genai`ã€‚

### Q: pip install æ²’åæ‡‰æˆ–å¤±æ•—

1. æ”¹ç”¨ `python -m pip install <å¥—ä»¶å>`
2. åŸ·è¡Œ `å®‰è£ä¾è³´.bat`
3. ç¢ºèª Python å·²åŠ å…¥ç³»çµ± PATH

### Q: Gemini å‡ºç¾ 404 models/gemini-xxx is not found

ç¨‹å¼æœƒä¾åºå˜—è©¦ `gemini-2.5-flash` â†’ `gemini-2.0-flash` â†’ `gemini-1.5-flash` â†’ `gemini-1.5-pro`ï¼Œè‹¥çš†å¤±æ•—æœƒçµ‚æ­¢ã€‚å¯æ”¹ç”¨ **Ollama æ¨¡å¼** é¿å…æ­¤å•é¡Œã€‚

### Q: Python 3.10 å‡ºç¾ä¸€å † DeprecationWarning

`google-generativeai` å·²è¢« Google å®£å‘Šå»¢æ£„ã€‚è«‹æ”¹ç”¨ `google-genai`ï¼š

```bash
pip uninstall google-generativeai
pip install google-genai
```

### Q: Ollama é€£æ¥å¤±æ•—

ç¢ºèªï¼š
1. `ollama serve` å·²åŸ·è¡Œ
2. æœå‹™åœ°å€æ­£ç¢ºï¼ˆé è¨­ `http://localhost:11434/v1`ï¼‰
3. å·²ä¸‹è¼‰æ¨¡å‹ï¼š`ollama list` æª¢æŸ¥ï¼Œ`ollama pull <æ¨¡å‹å>` ä¸‹è¼‰

### Q: æ¨è–¦çš„ Ollama æ¨¡å‹ï¼Ÿ

- **qwen2.5** / **qwen2.5:7b**ï¼šä¸­æ–‡æ•ˆæœä½³
- **gemma2:2b**ï¼šé«”ç©å°ã€é€Ÿåº¦å¿«
- **llama3.2:3b**ï¼šé€šç”¨æ€§ä½³

### Q: tkinter éŒ¯èª¤

- **Ubuntu/Debian**ï¼š`sudo apt-get install python3-tk`
- **CentOS**ï¼š`sudo yum install python3-tkinter`
- **Windows**ï¼šé€šå¸¸å·²å…§å»º

### Q: å¦‚ä½•é‡‹æ”¾ Ollama é¡¯å­˜ï¼Ÿ

è™•ç†å®Œæˆå¾Œï¼Œé»æ“Šã€Œé‡‹æ”¾æ¨¡å‹ï¼ˆé‡‹æ”¾é¡¯å­˜ï¼‰ã€æŒ‰éˆ•å³å¯ã€‚

## ğŸ“ æˆæ¬Š

æœ¬å°ˆæ¡ˆç‚ºé–‹æºå·¥å…·ï¼Œå¯è‡ªç”±ä½¿ç”¨èˆ‡ä¿®æ”¹ã€‚
